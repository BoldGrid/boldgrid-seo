!function(e){"use strict";butterbean.views.register_control("dashboard",{tagName:"div",attributes:function(){return{id:"butterbean-control-"+this.model.get("name"),"class":"butterbean-control butterbean-control-"+this.model.get("type")}},initialize:function(){e(window).bind("bgseo-report",_.bind(this.getAnalysis,this));this.model.get("type");this.bgseo_template=wp.template("butterbean-control-dashboard"),_.bindAll(this,"render"),this.model.bind("change",this.render)},getAnalysis:function(e,t){this.model.set(t)},render:function(){return this.model.get("active")&&(this.el.innerHTML=this.bgseo_template(this.model.toJSON())),this}})}(jQuery),function(e){"use strict";butterbean.views.register_control("keywords",{tagName:"div",attributes:function(){return{id:"butterbean-control-"+this.model.get("name"),"class":"butterbean-control butterbean-control-"+this.model.get("type")}},initialize:function(){e(window).bind("bgseo-report",_.bind(this.getAnalysis,this));this.model.get("type");this.bgseo_template=wp.template("butterbean-control-keywords"),_.bindAll(this,"render"),this.model.bind("change",this.render)},getAnalysis:function(e,t){this.model.set(t)},render:function(){return this.model.get("active")&&(this.el.innerHTML=this.bgseo_template(this.model.toJSON())),this}})}(jQuery);var BOLDGRID=BOLDGRID||{};BOLDGRID.SEO=BOLDGRID.SEO||{},function(e){"use strict";var t;BOLDGRID.SEO.Admin={init:function(){e(document).ready(function(){t._setWordCounts()})},wordCount:function(n){var o=n.attr("maxlength"),i=e("<span />",{"class":"boldgrid-seo-meta-counter",style:"font-weight: bold"}),s=e("<div />",{"class":"boldgrid-seo-meta-countdown boldgrid-seo-meta-extra",html:" characters left"});o&&n.removeAttr("maxlength").after(s.prepend(i)).on("keyup focus",function(){t.setCounter(i,n,o)}),t.setCounter(i,n,o)},setCounter:function(e,t,n){var o=t.val(),i=o.length;e.html(n-i),"boldgrid-seo-field-meta_description"===t.context.id?i>n?e.css({color:"red"}):i.isBetween(0,126)?e.css({color:"goldenrod"}):i>125?e.css({color:"limegreen"}):e.css({color:"black"}):i>n?e.css({color:"red"}):i.isBetween(0,30)?e.css({color:"goldenrod"}):i>29?e.css({color:"limegreen"}):e.css({color:"black"})},_setWordCounts:function(){e("#boldgrid-seo-field-meta_title, #boldgrid-seo-field-meta_description").each(function(){t.wordCount(e(this))})}},t=BOLDGRID.SEO.Admin}(jQuery),BOLDGRID.SEO.Admin.init(),function(e){"use strict";var t,n={};BOLDGRID.SEO.TinyMCE={init:function(){t.onloadContent(),t.generateReport(),e(document).ready(function(){t.editorChange()})},onloadContent:function(){e("#content.wp-editor-area[aria-hidden=false]");e(window).on("load bgseo-media-inserted",function(){var n;tinymce.ActiveEditor?n=tinyMCE.get(wpActiveEditor).getContent():(n=e("#content").val(),n=n.replace(/\r?\n|\r/g,"")),n={raw:n,text:t.stripper(n.toLowerCase())},e("#content").trigger("bgseo-analysis",[n])})},editorChange:function(){var n,o;return e("#content.wp-editor-area").on("input propertychange paste nodechange",function(){o=e(this).attr("id"),n=t.wpContent(o)}),n},tmceChange:function(e){var n,o=e.target.id;return n=t.wpContent(o)},wpContent:function(n){var o={};switch(n){case"tinymce":tinymce.activeEditor&&(o=tinyMCE.get(wpActiveEditor).getContent());break;case"content":o=e("#content").val(),o=o.replace(/\r?\n|\r/g,"")}o={raw:o,text:t.stripper(o.toLowerCase())},e("#content").trigger("bgseo-analysis",[o])},stripper:function(e){var t;return t=document.implementation.createHTMLDocument("New").body,t.innerHTML=e,t.textContent||t.innerText||" "},generateReport:function(){var t;e(document).on("bgseo-analysis",function(o,i){var s=e("#boldgrid-seo-field-meta_title").val().length,r=e("#boldgrid-seo-field-meta_description").val().length;if(n.title={length:s,lengthScore:BOLDGRID.SEO.Title.titleScore(s),keywordUsage:BOLDGRID.SEO.Title.keywords()},n.description={length:r,lengthScore:BOLDGRID.SEO.Description.descriptionScore(r),keywordUsage:BOLDGRID.SEO.Description.keywords()},n.robotIndex={lengthScore:BOLDGRID.SEO.Robots.indexScore()},n.robotFollow={lengthScore:BOLDGRID.SEO.Robots.followScore()},i){if(_.isUndefined(i.count)?0===i.count&&(n.content={length:0,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(0)}):(n.wordCount=i.count,n.content={length:i.count,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(i.count)}),i.raw){var a,l=i.raw;a=e(l).find("img").length,n.rawstatistics={h1Count:e(l).find("h1").length,h2Count:e(l).find("h2").length,h3Count:e(l).find("h3").length,imageCount:a},n.image={length:a,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoImageLengthScore(a)}}if(i.text){var d=i.text;t=textstatistics(d).wordCount(),t>99&&(n.textstatistics={gradeLevel:BOLDGRID.SEO.Readability.gradeLevel(d),keywordDensity:BOLDGRID.SEO.Keywords.keywordDensity(d,"gads"),recommendedKeywords:BOLDGRID.SEO.Keywords.recommendedKeywords(d,1)},e("#bgseo-custom-keyword").attr("placeholder",n.textstatistics.recommendedKeywords[0][0]),_.extend(n.textstatistics,{customKeyword:BOLDGRID.SEO.Keywords.getKeyword()}))}i.titleLength&&(n.title.length=i.titleLength),i.descLength&&(n.description.length=i.descLength),i.robotIndex&&(n.robotIndex={lengthScore:i.robotIndex}),i.robotFollow&&(n.robotFollow={lengthScore:i.robotFollow})}console.log(n),e("#content").trigger("bgseo-report",[n])})},getReport:function(){return n}},t=BOLDGRID.SEO.TinyMCE}(jQuery),BOLDGRID.SEO.TinyMCE.init(),function(e){"use strict";var t;BOLDGRID.SEO.ContentAnalysis={seoContentLengthScore:function(e){var t={};return 0===e&&(t={status:"red",msg:_bgseoContentAnalysis.content.length.badEmpty}),e.isBetween(0,199)&&(t={status:"red",msg:_bgseoContentAnalysis.content.length.badShort}),e.isBetween(198,300)&&(t={status:"yellow",msg:_bgseoContentAnalysis.content.length.ok}),e>299&&(t={status:"green",msg:_bgseoContentAnalysis.content.length.good}),t},seoImageLengthScore:function(e){var t={status:"green",msg:_bgseoContentAnalysis.image.length.good};return e||(t={status:"red",msg:_bgseoContentAnalysis.image.length.bad}),t}},t=BOLDGRID.SEO.ContentAnalysis}(jQuery),function(e){"use strict";var t;BOLDGRID.SEO.Description={init:function(){e(document).ready(function(){t._description()})},_description:function(){var t=e("#boldgrid-seo-field-meta_description");t.on("input propertychange paste",_.debounce(function(){var t=e(this).val().length;e(this).trigger("bgseo-analysis",[{descLength:t}])},1e3))},descriptionScore:function(e){var t={};return 0===e&&(t={status:"red",msg:_bgseoContentAnalysis.seoDescription.length.badEmpty}),e.isBetween(0,126)&&(t={status:"yellow",msg:_bgseoContentAnalysis.seoDescription.length.ok}),e.isBetween(125,156)&&(t={status:"green",msg:_bgseoContentAnalysis.seoDescription.length.good}),e>156&&(t={status:"red",msg:_bgseoContentAnalysis.seoDescription.length.badLong}),t},keywords:function(){var t=BOLDGRID.SEO.Keywords.getKeyword(),n=e("#boldgrid-seo-field-meta_description").val();return n.occurences(t)}},t=BOLDGRID.SEO.Description}(jQuery),BOLDGRID.SEO.Description.init(),function(e){"use strict";var t;BOLDGRID.SEO.Keywords={init:function(){e(document).ready(function(){t._keywords()})},_keywords:function(){var n=e("#bgseo-custom-keyword");n.on("input propertychange paste",_.debounce(function(){var n={};e(this).val().length;n={title:t.keywordsInTitle(),description:t.keywordsInDescription()},e(this).trigger("bgseo-analysis",[{keywords:n}])},1e3))},keywordCount:function(e,t){var n;return n=e.split(t).length-1},keywordDensity:function(e,n){var o,i,s;return n=n.toLowerCase(),i=t.keywordCount(e,n),s=textstatistics(e).wordCount(),o=i/s*100,o=Math.round(10*o)/10},recommendedKeywords:function(e,t){for(var n,o=e.toLowerCase().split(/\W+/),i={},s=[],r=0;r<o.length;r++){var a=o[r];!a||a.length<3||_bgseoStopWords.indexOf(a)>-1||("undefined"==typeof i[a]?(i[a]=s.length,s.push([a,1])):s[i[a]][1]++)}return s.sort(function(e,t){return t[1]-e[1]}),n=s.slice(0,t)},getCustomKeyword:function(){var t=e("#bgseo-custom-keyword").val();return t=e.trim(t)},getKeyword:function(){var e,n=BOLDGRID.SEO.TinyMCE.getReport();return e=t.getCustomKeyword().length?t.getCustomKeyword():n.textstatistics.recommendedKeywords[0][0]}},t=BOLDGRID.SEO.Keywords}(jQuery),function(e){"use strict";var t;BOLDGRID.SEO.Readability={gradeLevel:function(e){var n,o={};return n=textstatistics(e).fleschKincaidReadingEase(),o=t.gradeAnalysis(n)},gradeAnalysis:function(e){var t={};return e>90&&(t={lengthScore:e,gradeLevel:"5th grade",explanation:"Very easy to read. Easily understood by an average 11-year-old student.",status:"green",msg:_bgseoContentAnalysis.readingEase.goodHigh}),e.isBetween(79,91)&&(t={score:e,gradeLevel:"6th grade",explanation:"Easy to read. Conversational English for consumers.",status:"green",msg:_bgseoContentAnalysis.readingEase.goodMedHigh}),e.isBetween(69,81)&&(t={score:e,gradeLevel:"7th grade",explanation:"Fairly easy to read.",status:"green",msg:_bgseoContentAnalysis.readingEase.goodMedLow}),e.isBetween(59,71)&&(t={score:e,gradeLevel:"8th & 9th",explanation:"Plain English. Easily understood by 13- to 15-year-old students.",status:"green",msg:_bgseoContentAnalysis.readingEase.goodLow}),e.isBetween(49,61)&&(t={score:e,gradeLevel:"10th to 12th",explanation:"Fairly difficult to read.",status:"yellow",msg:_bgseoContentAnalysis.readingEase.ok}),e.isBetween(29,51)&&(t={score:e,gradeLevel:"College Student",explanation:"Difficult to read.",status:"red",msg:_bgseoContentAnalysis.readingEase.badHigh}),e<30&&(t={score:e,gradeLevel:"College Graduate",explanation:"Difficult to read.",status:"red",msg:_bgseoContentAnalysis.readingEase.badLow}),t}},t=BOLDGRID.SEO.Readability}(jQuery),function(e){"use strict";var t;BOLDGRID.SEO.Robots={init:function(){e(document).ready(function(){t._index(),t._follow()})},_index:function(){var n=e("input[name=butterbean_boldgrid_seo_setting_bgseo_robots_index]");n.on("change",function(){e(this).trigger("bgseo-analysis",[{robotIndex:t.indexScore()}])})},indexScore:function(){var t={status:"green",msg:_bgseoContentAnalysis.noIndex.good};return e("input[name=butterbean_boldgrid_seo_setting_bgseo_robots_index][value=noindex]").is(":checked")&&(t={status:"yellow",msg:_bgseoContentAnalysis.noIndex.bad}),t},_follow:function(){var n=e("input[name=butterbean_boldgrid_seo_setting_bgseo_robots_follow]");n.on("change",function(){e(this).trigger("bgseo-analysis",[{robotFollow:t.followScore()}])})},followScore:function(){var t={status:"green",msg:_bgseoContentAnalysis.noFollow.good};return e("input[name=butterbean_boldgrid_seo_setting_bgseo_robots_follow][value=nofollow]").is(":checked")&&(t={status:"yellow",msg:_bgseoContentAnalysis.noFollow.bad}),t}},t=BOLDGRID.SEO.Robots}(jQuery),BOLDGRID.SEO.Robots.init(),function(e){"use strict";var t;BOLDGRID.SEO.Title={init:function(){e(document).ready(function(){t._title()})},getTitle:function(){var t=e("#boldgrid-seo-field-meta_title");return t},_title:function(){var n=t.getTitle();n.on("input propertychange paste",_.debounce(function(){var t=e(this).val().length;e(this).trigger("bgseo-analysis",[{titleLength:t}])},1e3))},titleScore:function(e){var t={};return 0===e&&(t={status:"red",msg:_bgseoContentAnalysis.seoTitle.length.badEmpty}),e.isBetween(0,31)&&(t={status:"yellow",msg:_bgseoContentAnalysis.seoTitle.length.ok}),e.isBetween(29,71)&&(t={status:"green",msg:_bgseoContentAnalysis.seoTitle.length.good}),e>70&&(t={status:"red",msg:_bgseoContentAnalysis.seoTitle.length.badLong}),t},keywords:function(){var e=BOLDGRID.SEO.Keywords.getKeyword(),t=BOLDGRID.SEO.Title.getTitle().val();return t.occurences(e)}},t=BOLDGRID.SEO.Title}(jQuery),BOLDGRID.SEO.Title.init(),function(e){"use strict";var t;BOLDGRID.SEO.Tooltips={init:function(){e(document).ready(function(){t.hideToolTips(),t._enableTooltips(),t._toggleTooltip()})},_toggleTooltip:function(){e(".butterbean-label, .bgseo-tooltip").on("click",function(e){t.toggleTooltip(e)})},_enableTooltips:function(){var t=e(".butterbean-label").next(".butterbean-description"),n=e("<span />",{"class":"bgseo-tooltip dashicons dashicons-editor-help","aria-expanded":"false"});t.length&&t.prev().append(n)},toggleTooltip:function(t){e(t.currentTarget).next(".butterbean-description").slideToggle()},hideToolTips:function(){e(".butterbean-control .butterbean-description").hide()}},t=BOLDGRID.SEO.Tooltips}(jQuery),BOLDGRID.SEO.Tooltips.init(),function(e){"use strict";var t;BOLDGRID.SEO.Util={init:function(){Number.prototype.isBetween=function(e,t){return this>e&&this<t},String.prototype.occurences=function(e,t){if(e+="",e.length<=0)return this.length+1;for(var n=0,o=0,i=t?1:e.length;;){if(o=this.indexOf(e,o),!(o>=0))break;++n,o+=i}return n}}},t=BOLDGRID.SEO.Util}(jQuery),BOLDGRID.SEO.Util.init(),function(e,t){e(function(){function n(){var e,n;e=!o||o.isHidden()?i.val():o.getContent({format:"raw"}),n=t.count(e),n!==s&&i.trigger("bgseo-analysis",[{count:n}]),s=n}var o,i=e("#content"),s=(e("#wp-word-count").find(".word-count"),0);e(document).on("tinymce-editor-init",function(e,t){"content"===t.id&&(o=t,t.on("nodechange keyup",_.debounce(n,1e3)))}),i.on("input keyup",_.debounce(n,1e3)),n()})}(jQuery,new wp.utils.WordCounter);