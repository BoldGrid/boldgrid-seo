!function(t){"use strict";var e;BOLDGRID.SEO.TinyMCE={init:function(){e.onloadContent(),e.generateReport(),t(document).ready(function(){e.editorChange()})},onloadContent:function(){t("#content.wp-editor-area[aria-hidden=false]");t(window).on("load bgseo-media-inserted",function(){var n;tinymce.ActiveEditor?n=tinyMCE.get(wpActiveEditor).getContent():(n=t("#content").val(),n=n.replace(/\r?\n|\r/g,"")),n={raw:n,text:e.stripper(n.toLowerCase())},t("#content").trigger("bgseo-analysis",[n])})},editorChange:function(){var n,o;return t("#content.wp-editor-area").on("input propertychange paste nodechange",function(){o=t(this).attr("id"),n=e.wpContent(o)}),n},tmceChange:function(t){var n,o=t.target.id;return n=e.wpContent(o)},wpContent:function(n){var o={};switch(n){case"tinymce":tinymce.activeEditor&&(o=tinyMCE.get(wpActiveEditor).getContent());break;case"content":o=t("#content").val(),o=o.replace(/\r?\n|\r/g,"")}o={raw:o,text:e.stripper(o.toLowerCase())},t("#content").trigger("bgseo-analysis",[o])},stripper:function(t){var e;return e=document.implementation.createHTMLDocument("New").body,e.innerHTML=t,e.textContent||e.innerText||" "},generateReport:function(){var e,n={};t(document).on("bgseo-analysis",function(o,r){var i=t("#boldgrid-seo-field-meta_title").val().length,c=t("#boldgrid-seo-field-meta_description").val().length;if(n.title={length:i,lengthScore:BOLDGRID.SEO.Title.titleScore(i),keywordUsage:0},n.description={length:c,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoDescriptionLengthScore(c),keywordUsage:0},n.robotIndex={lengthScore:BOLDGRID.SEO.Robots.indexScore()},n.robotFollow={lengthScore:BOLDGRID.SEO.Robots.followScore()},r){if(_.isUndefined(r.count)?0===r.count&&(n.content={length:0,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(0)}):(n.wordCount=r.count,n.content={length:r.count,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(r.count)}),r.raw){var a,s=r.raw;a=t(s).find("img").length,n.rawstatistics={h1Count:t(s).find("h1").length,h2Count:t(s).find("h2").length,h3Count:t(s).find("h3").length,imageCount:a},n.image={length:a,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoImageLengthScore(a)}}if(r.text){var d=r.text;e=textstatistics(d).wordCount(),e>99&&(n.textstatistics={readingEase:BOLDGRID.SEO.ContentAnalysis.readingEase(d),gradeLevel:BOLDGRID.SEO.ContentAnalysis.gradeLevel(d),keywordDensity:BOLDGRID.SEO.ContentAnalysis.keywordDensity(d,"gads"),recommendedKeywords:BOLDGRID.SEO.ContentAnalysis.recommendedKeywords(d,1)},t("#bgseo-custom-keyword").attr("placeholder",n.textstatistics.recommendedKeywords[0][0]))}r.titleLength&&(n.title.length=r.titleLength),r.descLength&&(n.description.length=r.descLength),r.robotIndex&&(n.robotIndex={lengthScore:r.robotIndex}),r.robotFollow&&(n.robotFollow={lengthScore:r.robotFollow})}console.log(n),t("#content").trigger("bgseo-report",[n])})}},e=BOLDGRID.SEO.TinyMCE}(jQuery),BOLDGRID.SEO.TinyMCE.init(),function(t,e){t(function(){function n(){var t,n;t=!o||o.isHidden()?r.val():o.getContent({format:"raw"}),n=e.count(t),n!==i&&r.trigger("bgseo-analysis",[{count:n}]),i=n}var o,r=t("#content"),i=(t("#wp-word-count").find(".word-count"),0);t(document).on("tinymce-editor-init",function(t,e){"content"===e.id&&(o=e,e.on("nodechange keyup",_.debounce(n,1e3)))}),r.on("input keyup",_.debounce(n,1e3)),n()})}(jQuery,new wp.utils.WordCounter);