!function(e){"use strict";var t;BOLDGRID.SEO.TinyMCE={init:function(){t.onloadContent(),t.generateReport(),e(document).ready(function(){t.editorChange()})},onloadContent:function(){e("#content.wp-editor-area[aria-hidden=false]");e(window).on("load bgseo-media-inserted",function(){var n;tinymce.ActiveEditor?n=tinyMCE.get(wpActiveEditor).getContent():(n=e("#content").val(),n=n.replace(/\r?\n|\r/g,"")),n={raw:n,text:t.stripper(n.toLowerCase())},e("#content").trigger("bgseo-analysis",[n])})},editorChange:function(){var n,o;return e("#content.wp-editor-area").on("input propertychange paste nodechange",function(){o=e(this).attr("id"),n=t.wpContent(o)}),n},tmceChange:function(e){var n,o=e.target.id;return n=t.wpContent(o)},wpContent:function(n){var o={};switch(n){case"tinymce":tinymce.activeEditor&&(o=tinyMCE.get(wpActiveEditor).getContent());break;case"content":o=e("#content").val(),o=o.replace(/\r?\n|\r/g,"")}o={raw:o,text:t.stripper(o.toLowerCase())},e("#content").trigger("bgseo-analysis",[o])},stripper:function(e){var t;return t=document.implementation.createHTMLDocument("New").body,t.innerHTML=e,t.textContent||t.innerText||" "},generateReport:function(){var t,n={};e(document).on("bgseo-analysis",function(o,r){var i=e("#boldgrid-seo-field-meta_title").val().length,c=e("#boldgrid-seo-field-meta_description").val().length;if(n.title={length:i,lengthScore:BOLDGRID.SEO.Title.titleScore(i),keywordUsage:0},n.description={length:c,lengthScore:BOLDGRID.SEO.Description.descriptionScore(c),keywordUsage:0},n.robotIndex={lengthScore:BOLDGRID.SEO.Robots.indexScore()},n.robotFollow={lengthScore:BOLDGRID.SEO.Robots.followScore()},r){if(_.isUndefined(r.count)?0===r.count&&(n.content={length:0,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(0)}):(n.wordCount=r.count,n.content={length:r.count,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(r.count)}),r.raw){var s,a=r.raw;s=e(a).find("img").length,n.rawstatistics={h1Count:e(a).find("h1").length,h2Count:e(a).find("h2").length,h3Count:e(a).find("h3").length,imageCount:s},n.image={length:s,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoImageLengthScore(s)}}if(r.text){var d,g=r.text;t=textstatistics(g).wordCount(),t>99&&(n.textstatistics={gradeLevel:BOLDGRID.SEO.Readability.gradeLevel(g),keywordDensity:BOLDGRID.SEO.Keywords.keywordDensity(g,"gads"),recommendedKeywords:BOLDGRID.SEO.Keywords.recommendedKeywords(g,1)},d=BOLDGRID.SEO.Keywords.getCustomKeyword().length?{customKeyword:BOLDGRID.SEO.Keywords.getCustomKeyword()}:{customKeyword:n.textstatistics.recommendedKeywords[0][0]},e("#bgseo-custom-keyword").attr("placeholder",n.textstatistics.recommendedKeywords[0][0]),_.extend(n.textstatistics,d))}r.titleLength&&(n.title.length=r.titleLength),r.descLength&&(n.description.length=r.descLength),r.robotIndex&&(n.robotIndex={lengthScore:r.robotIndex}),r.robotFollow&&(n.robotFollow={lengthScore:r.robotFollow})}console.log(n),e("#content").trigger("bgseo-report",[n])})}},t=BOLDGRID.SEO.TinyMCE}(jQuery),BOLDGRID.SEO.TinyMCE.init();