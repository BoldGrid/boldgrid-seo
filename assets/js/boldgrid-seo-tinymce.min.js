!function(e){"use strict";var t;BOLDGRID.SEO.TinyMCE={init:function(){t.onloadContent(),t.generateReport(),e(document).ready(function(){t.editorChange()})},onloadContent:function(){e("#content.wp-editor-area[aria-hidden=false]");e(window).on("load bgseo-media-inserted",function(){var n;tinymce.ActiveEditor?n=tinyMCE.get(wpActiveEditor).getContent():(n=e("#content").val(),n=n.replace(/\r?\n|\r/g,"")),n={raw:n,text:t.stripper(n.toLowerCase())},e("#content").trigger("bgseo-analysis",[n])})},editorChange:function(){var n,o;return e("#content.wp-editor-area").on("input propertychange paste nodechange",function(){o=e(this).attr("id"),n=t.wpContent(o)}),n},tmceChange:function(e){var n,o=e.target.id;return n=t.wpContent(o)},wpContent:function(n){var o={};switch(n){case"tinymce":tinymce.activeEditor&&(o=tinyMCE.get(wpActiveEditor).getContent());break;case"content":o=e("#content").val(),o=o.replace(/\r?\n|\r/g,"")}o={raw:o,text:t.stripper(o.toLowerCase())},e("#content").trigger("bgseo-analysis",[o])},stripper:function(e){var t;return t=document.implementation.createHTMLDocument("New").body,t.innerHTML=e,t.textContent||t.innerText||" "},generateReport:function(){var t,n={};e(document).on("bgseo-analysis",function(o,i){var r=e("#boldgrid-seo-field-meta_title").val().length,a=e("#boldgrid-seo-field-meta_description").val().length;if(n.title={length:r,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoTitleLengthScore(r),keywordUsage:0},n.description={length:a,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoDescriptionLengthScore(a),keywordUsage:0},n.robotIndex={lengthScore:BOLDGRID.SEO.Robots.indexScore()},i){if(_.isUndefined(i.count)?0===i.count&&(n.content={length:0,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(0)}):(n.wordCount=i.count,n.content={length:i.count,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoContentLengthScore(i.count)}),i.raw){var c,s=i.raw;c=e(s).find("img").length,n.rawstatistics={h1Count:e(s).find("h1").length,h2Count:e(s).find("h2").length,h3Count:e(s).find("h3").length,imageCount:c},n.image={length:c,lengthScore:BOLDGRID.SEO.ContentAnalysis.seoImageLengthScore(c)}}if(i.text){var d=i.text;t=textstatistics(d).wordCount(),t>99&&(n.textstatistics={readingEase:BOLDGRID.SEO.ContentAnalysis.readingEase(d),gradeLevel:BOLDGRID.SEO.ContentAnalysis.gradeLevel(d),keywordDensity:BOLDGRID.SEO.ContentAnalysis.keywordDensity(d,"gads"),recommendedKeywords:BOLDGRID.SEO.ContentAnalysis.recommendedKeywords(d,1)},e("#bgseo-custom-keyword").attr("placeholder",n.textstatistics.recommendedKeywords[0][0]))}i.titleLength&&(n.title.length=i.titleLength),i.descLength&&(n.description.length=i.descLength),i.robotIndex&&(n.robotIndex={lengthScore:i.robotIndex})}console.log(n),e("#content").trigger("bgseo-report",[n])})}},t=BOLDGRID.SEO.TinyMCE}(jQuery),BOLDGRID.SEO.TinyMCE.init(),function(e,t){e(function(){function n(){var e,n;e=!o||o.isHidden()?i.val():o.getContent({format:"raw"}),n=t.count(e),n!==r&&i.trigger("bgseo-analysis",[{count:n}]),r=n}var o,i=e("#content"),r=(e("#wp-word-count").find(".word-count"),0);e(document).on("tinymce-editor-init",function(e,t){"content"===t.id&&(o=t,t.on("nodechange keyup",_.debounce(n,1e3)))}),i.on("input keyup",_.debounce(n,1e3)),n()})}(jQuery,new wp.utils.WordCounter);